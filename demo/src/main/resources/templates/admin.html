<!DOCTYPE html> 
<html lang="en" xmlns:th="http://www.thymeleaf.org"> 
<<<<<<< HEAD
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Admin Page</title> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> 
    <style> 
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        h1, h2 {
=======
    <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Admin Page</title> 
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> 
    <style> body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
            h1, h2 {
>>>>>>> origin/main
            background-color: #333;
            color: #fff;
            margin: 0;
            padding: 10px;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: left;
        }

        th {
            background-color: #f2f2f2;
            font-weight: normal;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

<<<<<<< HEAD
        .delete-btn-u,
        .delete-btn-p,
        .delete-btn-b,
=======
        .delete-btn-u {
            background-color: #f44336;
            border: none;
            color: #fff;
            padding: 5px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 4px 2px;
            cursor: pointer;
        }

        .delete-btn-p {
            background-color: #f44336;
            border: none;
            color: #fff;
            padding: 5px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 4px 2px;
            cursor: pointer;
        }

>>>>>>> origin/main
        .delete-btn-f {
            background-color: #f44336;
            border: none;
            color: #fff;
            padding: 5px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 4px 2px;
            cursor: pointer;
        }

<<<<<<< HEAD
        .modify-btn {
            background-color: #4CAF50;
=======
        .delete-btn-b {
            background-color: #f44336;
>>>>>>> origin/main
            border: none;
            color: #fff;
            padding: 5px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 4px 2px;
            cursor: pointer;
        }

<<<<<<< HEAD
        .add-new-btn {
            background-color: #008CBA;
            border: none;
            color: #fff;
            padding: 5px 10px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 14px;
            margin: 4px 2px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <h1>Admin Page</h1>
=======
    </style>
    <h1>Admin Page</h1>

    <!-- Users Table -->
>>>>>>> origin/main
    <h2>Users</h2>
    <table border="1">
        <tr>
            <th>User ID</th>
            <th>Password</th>
<<<<<<< HEAD
            <th>Actions</th> 
=======
            <th>Delete</th> <!-- New column for delete button -->
>>>>>>> origin/main
        </tr>
        <tr th:each="user : ${users}">
            <td th:text="${user.userId}"></td>
            <td th:text="${user.password}"></td>
<<<<<<< HEAD
            <td>
                <button class="delete-btn-u" data-type="user" data-id="${user.userId}" th:id="'deleteUserId_' + ${user.userId}" th:text="${user.userId}">Delete</button>
            </td>
        </tr>
        <tr>
            <td><input type="text" id="newUserId" placeholder="User ID"></td>
            <td><input type="text" id="newPassword" placeholder="Password"></td>
        </tr>
    </table>
=======
            <td><button class="delete-btn-u" data-type="user" data-id="${user.userId}" th:id="userId" th:text="${user.userId}">Delete</button></td> <!-- Delete button -->
        </tr>
    </table>

    <!-- Persons Table -->
>>>>>>> origin/main
    <h2>Persons</h2>
    <table border="1">
        <tr>
            <th>User ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Password</th>
            <th>Phone Number</th>
            <th>Address</th>
<<<<<<< HEAD
            <th>Actions</th> 
=======
            <th>Delete</th> <!-- New column for delete button -->
>>>>>>> origin/main
        </tr>
        <tr th:each="person : ${persons}">
            <td th:text="${person.userId}"></td>
            <td th:text="${person.name}"></td>
            <td th:text="${person.email}"></td>
            <td th:text="${person.password}"></td>
            <td th:text="${person.phoneNumber}"></td>
            <td th:text="${person.address}"></td>
<<<<<<< HEAD
            <td>
                <button class="delete-btn-p" data-type="person" data-id="${person.userId}" th:id="personId" th:text="${person.userId}">Delete</button>
            </td>
        </tr>

    </table>
=======
            <td><button class="delete-btn-p" data-type="person" data-id="${person.userId}" th:id="personId" th:text="${person.userId}">Delete</button></td> <!-- Delete button -->
        </tr>
    </table>

    <!-- Bookings Table -->
>>>>>>> origin/main
    <h2>Bookings</h2>
    <table border="1">
        <tr>
            <th>Booking ID</th>
            <th>User ID</th>
            <th>Flight ID</th>
            <th>Booking Date</th>
            <th>Status</th>
<<<<<<< HEAD
            <th>Actions</th> 
=======
            <th>Delete</th> <!-- New column for delete button -->
>>>>>>> origin/main
        </tr>
        <tr th:each="booking : ${bookings}">
            <td th:text="${booking.bookingId}"></td>
            <td th:text="${booking.userId}"></td>
            <td th:text="${booking.flightId}"></td>
            <td th:text="${booking.bookingDate}"></td>
            <td th:text="${booking.status}"></td>
<<<<<<< HEAD
            <td>
                <button class="delete-btn-b" data-type="booking" data-id="${booking.bookingId}" th:id="bookingId" th:text="${booking.bookingId}">Delete</button>
            </td>
        </tr>
        <tr>
            <td><input type="text" id="newBookingId" placeholder="Booking ID"></td>
            <td><input type="text" id="newUserId" placeholder="User ID"></td>
            <td><input type="text" id="newFlightId" placeholder="Flight ID"></td>
            <td><input type="text" id="newBookingDate" placeholder="Booking Date"></td>
            <td><input type="text" id="newStatus" placeholder="Status"></td>
        </tr>
        
    </table>
    <div id="modifyBookingModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Modify Booking</h2>
            <form id="modifyBookingForm">
                <!-- Input fields for modifying booking details -->
                <input type="hidden" id="modifyBookingId" name="bookingId">
                <label for="modifyBookingDate">Booking Date:</label>
                <input type="date" id="modifyBookingDate" name="bookingDate">
                <label for="modifyFlightId">Flight ID:</label>
                <input type="text" id="modifyFlightId" name="flightId">
                <label for="modifyStatus">Status:</label>
                <input type="text" id="modifyStatus" name="status">
                <button type="submit">Submit</button>
            </form>
        </div>
    </div>
=======
            <td><button class="delete-btn-b" data-type="booking" data-id="${booking.bookingId}" th:id="bookingId" th:text="${booking.userId}">Delete</button></td> <!-- Delete button -->
        </tr>
    </table>

    <!-- Flights Table -->
>>>>>>> origin/main
    <h2>Flights</h2>
    <table border="1">
        <tr>
            <th>Flight ID</th>
            <th>Source</th>
            <th>Destination</th>
            <th>Departure Date</th>
            <th>Return Date</th>
            <th>Price</th>
            <th>Available Seats</th>
            <th>Flight Type</th>
<<<<<<< HEAD
            <th>Actions</th> 
=======
            <th>Delete</th> <!-- New column for delete button -->
>>>>>>> origin/main
        </tr>
        <tr th:each="flight : ${flights}">
            <td th:text="${flight.flightId}"></td>
            <td th:text="${flight.source}"></td>
            <td th:text="${flight.destination}"></td>
            <td th:text="${flight.departureDate}"></td>
            <td th:text="${flight.returnDate}"></td>
            <td th:text="${flight.price}"></td>
            <td th:text="${flight.availableSeats}"></td>
            <td th:text="${flight.flightType}"></td>
<<<<<<< HEAD
            <td>
                <button class="delete-btn-f" data-type="flight" data-id="${flight.flightId}" th:id="flightId" th:text="${flight.flightId}">Delete</button>
            </td>
        </tr>
        <tr>
            <td><input type="text" id="newFlightId" placeholder="Flight ID"></td>
            <td><input type="text" id="newSource" placeholder="Source"></td>
            <td><input type="text" id="newDestination" placeholder="Destination"></td>
            <td><input type="text" id="newDepartureDate" placeholder="Departure Date"></td>
            <td><input type="text" id="newReturnDate" placeholder="Return Date"></td>
            <td><input type="text" id="newPrice" placeholder="Price"></td>
            <td><input type="text" id="newAvailableSeats" placeholder="Available Seats"></td>
            <td><input type="text" id="newFlightType" placeholder="Flight Type"></td>
            <td><button class="add-new-btn" onclick="addFlight()">Add Flight</button></td>
=======
            <td><button class="delete-btn-f" data-type="flight" data-id="${flight.flightId}" th:id="flightId" th:text="${flight.flightId}">Delete</button></td> <!-- Delete button -->
>>>>>>> origin/main
        </tr>
    </table>

    <script>
<<<<<<< HEAD
            function addFlight() {
                var flightId = $("#newFlightId").val();
                var source = $("#newSource").val();
                var destination = $("#newDestination").val();
                var departureDate = $("#newDepartureDate").val();
                var returnDate = $("#newReturnDate").val();
                var price = $("#newPrice").val();
                var availableSeats = $("#newAvailableSeats").val();
                var flightType = $("#newFlightType").val();

                var requestData = {
                    "flightId": flightId,
                    "source": source,
                    "destination": destination,
                    "departureDate": departureDate,
                    "returnDate": returnDate,
                    "price": parseFloat(price), // Ensure price is parsed as a float
                    "availableSeats": parseInt(availableSeats), // Ensure availableSeats is parsed as an integer
                    "flightType": flightType
                };

                console.log("Data to be sent:", requestData);

                $.ajax({
                    url: "/addFlight",
                    type: "POST",
                    data: JSON.stringify(requestData),
                    contentType: "application/json",
                    success: function(response) {
                        alert("Flight added successfully!");
                        location.reload();
                    },
                    error: function(xhr, status, error) {
                        alert("Flight added successfully! Refresh");
                    }
                });
            }


=======
>>>>>>> origin/main
        $(document).ready(function() {
            $(".delete-btn-f").click(function() {
                var type = $(this).data("type"); 
                var id = $(this).data("id");
                console.log("Clicked on delete button for " + type + " with ID: " + id);
                var flightId = document.getElementById('flightId').innerText;
                console.log("Flight ID: " + flightId);
                var confirmation = confirm("Are you sure you want to delete this " + type + "?");
                if (confirmation) {
                    $.ajax({
                        url: "/delete" + type + "/" + flightId,
                        type: "DELETE",
                        success: function(response) {
                            alert(type + " deleted successfully!");
                            location.reload();
                        },
                        error: function(xhr, status, error) {
                            alert("Error deleting " + type + ": " + error);
                        }
                    });
                }
            });
<<<<<<< HEAD
=======

>>>>>>> origin/main
            $(".delete-btn-u").click(function() {
                var type = $(this).data("type"); 
                var id = $(this).data("id");
                console.log("Clicked on delete button for " + type + " with ID: " + id);
                var userId = document.getElementById('userId').innerText;
                console.log("Flight ID: " + flightId);
                var confirmation = confirm("Are you sure you want to delete this " + type + "?");
                if (confirmation) {
                    $.ajax({
                        url: "/delete" + type + "/" + userId,
                        type: "DELETE",
                        success: function(response) {
                            alert(type + " deleted successfully!");
                            location.reload();
                        },
                        error: function(xhr, status, error) {
                            alert("Error deleting " + type + ": Not allowed to delete users");
                        }
                    });
                }
            });

            $(".delete-btn-b").click(function() {
                var type = $(this).data("type"); 
                var id = $(this).data("id");
                console.log("Clicked on delete button for " + type + " with ID: " + id);
                var bookingId = document.getElementById('bookingId').innerText;
                console.log("Flight ID: " + flightId);
                var confirmation = confirm("Are you sure you want to delete this " + type + "?");
                if (confirmation) {
                    $.ajax({
                        url: "/delete" + type + "/" + bookingId,
                        type: "DELETE",
                        success: function(response) {
                            alert(type + " deleted successfully!");
                            location.reload();
                        },
                        error: function(xhr, status, error) {
                            alert("Error deleting " + type + ": " + error);
                        }
                    });
                }
            });

            $(".delete-btn-p").click(function() {
                var type = $(this).data("type"); 
                var id = $(this).data("id");
                console.log("Clicked on delete button for " + type + " with ID: " + id);
                var userId = document.getElementById('userId').innerText;
                console.log("Flight ID: " + flightId);
                var confirmation = confirm("Are you sure you want to delete this " + type + "?");
                if (confirmation) {
                    $.ajax({
                        url: "/delete" + type + "/" + userId,
                        type: "DELETE",
                        success: function(response) {
                            alert(type + " deleted successfully!");
                            location.reload();
                        },
                        error: function(xhr, status, error) {
                            alert("Error deleting " + type + ": Not allowed to delete persons" );
                        }
                    });
                }
            });
<<<<<<< HEAD
            $(".modify-btn").click(function() {
                var bookingId = $(this).data("id");
                $("#modifyBookingId").val(bookingId);
                $("#modifyBookingModal").show();
            });

            $(".close").click(function() {
                $("#modifyBookingModal").hide();
            });

            $(window).click(function(event) {
                if (event.target == $("#modifyBookingModal")[0]) {
                    $("#modifyBookingModal").hide();
                }
            });

            $("#modifyBookingForm").submit(function(event) {
                event.preventDefault();
                var formData = $(this).serializeArray();
                $.ajax({
                    url: "/modifyBooking",
                    type: "POST",
                    data: formData,
                    success: function(response) {
                        alert("Booking modified successfully!");
                        $("#modifyBookingModal").hide();
                        location.reload();
                    },
                    error: function(xhr, status, error) {
                        alert("Success " + error);
                    }
                });
            });
        });
    </script>
=======

        });
    </script>     
>>>>>>> origin/main
</body>
</html>
